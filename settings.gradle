/*
 * This file was generated by the Gradle 'init' task.
 *
 * The settings file is used to specify which projects to include in your build.
 * 
 * Detailed information about configuring a multi-project build in Gradle can be found
 * in the user guide at https://docs.gradle.org/4.7/userguide/multi_project_builds.html
 */

rootProject.name = 'netbeans'
include 'nbbuild'
def clusterDirs = [\
    'apisupport', \
    'enterprise', \
    'ergonomics',
    'extide',
    'groovy',
    'harness',
    'ide',
    'java',
    'javafx',
    'nb',
    'nbi',
    'php',
    'platform',
    'profiler',
    'webcommon',
    'websvccommon'
]
//clusterDirs = ['platform']
clusterDirs.each() { cluster ->
    new File(rootDir, cluster).eachDir { sub -> 
        File projectXML = new File (sub, 'nbproject/project.xml')
        if (projectXML.canRead()) {
            def prj = new XmlSlurper().parse(projectXML)
            if ('org.netbeans.modules.apisupport.project'.equals(prj.type.text())) {
                def name = prj.configuration.data['code-name-base'].text()
                include name
                findProject(":$name").projectDir = sub
//                prj.configuration.data['module-dependencies'].dependency.each () { 
//                    println it['code-name-base'].text
//                } 
            }
        }
    }
}
